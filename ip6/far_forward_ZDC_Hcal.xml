<lccdd>
  <comment>
    //////////////////////////////////////////////////
    // Far Forward Ion Zero Degree Calorimeter
    // Silicon/W for Hcal
    //////////////////////////////////////////////////
  </comment>        

  <detectors>
    <detector id="ffi_ZDC_HCAL_ID" name="ffi_ZDC_HCAL" type="ffi_ZDC_Sampling" readout="ffi_ZDC_HCAL_Hits" vis="ffi_ZDC_HCAL_Vis">
      <position x="ffi_ZDC_HCAL_x_pos" y="ffi_ZDC_HCAL_y_pos" z="ffi_ZDC_HCAL_z_pos"/>
      <rotation x="ffi_ZDC_HCAL_rotateX_angle" y="ffi_ZDC_HCAL_rotateY_angle" z="ffi_ZDC_HCAL_rotateZ_angle"/>
      <dimensions x="ffi_ZDC_HCAL_width" z="ffi_ZDC_HCAL_length"/>
      
      <layer repeat="ffi_ZDC_Gap_NRepeat">
        <slice name="Gap_slice" material="Air" thickness="ffi_ZDC_Gap_Thickness" vis="InvisibleNoDaughters"/>
      </layer>
      <layer repeat="ffi_ZDC_PbScint_NRepeat">
        <slice name="Lead_slice"  material="Pb"               thickness="ffi_ZDC_Lead_Thickness"  vis="BlueGreenVis"/>
        <slice name="Scint_slice" material="ZDC_Scintillator" thickness="ffi_ZDC_Scint_Thickness" vis="AnlOrange" sensitive="true"/>
	      <slice name="Air_4_slice" material="Air"              thickness="ffi_ZDC_Air_4_Thickness" vis="InvisibleNoDaughters"/>
      </layer>
       <layer repeat="ffi_ZDC_SiPb_NRepeat">
        <slice name="Lead_slice"      material="Pb"            thickness="ffi_ZDC_Lead_Thickness"      vis="BlueGreenVis"/>
        <slice name="Glue_1_slice"    material="ZDC_EpoxyGlue" thickness="ffi_ZDC_Glue_1_Thickness"    vis="AnlGold"/>
        <slice name="Silicon_2_slice" material="Silicon"       thickness="ffi_ZDC_Silicon_2_Thickness" vis="RedVis" sensitive="true"/>
        <slice name="Glue_2_slice"    material="ZDC_EpoxyGlue" thickness="ffi_ZDC_Glue_2_Thickness"    vis="AnlGold"/>
        <slice name="FPC_slice"       material="ZDC_EpoxyGlue" thickness="ffi_ZDC_FPC_Thickness"       vis="AnlGold"/>
        <slice name="Air_3_slice"     material="Air"           thickness="ffi_ZDC_Air_3_Thickness"     vis="InvisibleNoDaughters"/>
      </layer>

      <layer repeat="ffi_ZDC_Gap_NRepeat">
        <slice name="Gap_slice" material="Air" thickness="ffi_ZDC_Gap_Thickness" vis="InvisibleNoDaughters"/>
      </layer>
      <layer repeat="ffi_ZDC_PbScint_NRepeat">
        <slice name="Lead_slice"  material="Pb"               thickness="ffi_ZDC_Lead_Thickness"  vis="BlueGreenVis"/>
        <slice name="Scint_slice" material="ZDC_Scintillator" thickness="ffi_ZDC_Scint_Thickness" vis="AnlOrange" sensitive="true"/>
        <slice name="Air_4_slice" material="Air"              thickness="ffi_ZDC_Air_4_Thickness" vis="InvisibleNoDaughters"/>
      </layer>
    </detector>
  </detectors>

  <define>
    <constant name="ZDC_HCAL_PbScint1Min_index"   value="1 + ffi_ZDC_Gap_NRepeat" />
    <constant name="ZDC_HCAL_PbScint1Max_index"   value="ZDC_HCAL_PbScint1Min_index + ffi_ZDC_PbScint_NRepeat - 1" />
    <constant name="ZDC_HCAL_SiPbMin_index"       value="ZDC_HCAL_PbScint1Max_index + 1" />
    <constant name="ZDC_HCAL_SiPbMax_index"       value="ZDC_HCAL_SiPbMin_index + ffi_ZDC_SiPb_NRepeat - 1" />
    <constant name="ZDC_HCAL_PbScint2Min_index"   value="1 + ZDC_HCAL_SiPbMin_index + ffi_ZDC_Gap_NRepeat" />
    <constant name="ZDC_HCAL_PbScint2Max_index"   value="ZDC_HCAL_PbScint2Min_index + ffi_ZDC_PbScint_NRepeat - 1" />
  </define>

  <readouts>
    <readout name="ffi_ZDC_HCAL_Hits">
      <segmentation type="MultiSegmentation" key="layer">
        <segmentation name="Si_LG_grid" type="CartesianGridXY" key_min="ZDC_HCAL_SiPbMin_index" key_max="ZDC_HCAL_SiPbMax_index" grid_size_x="1.0*cm" grid_size_y="1.0*cm"/>
        <segmentation name="Scint_grid" type="CartesianGridXY" key_min="ZDC_HCAL_PbScint1Min_index" key_max="ZDC_HCAL_PbScint1Max_index" grid_size_x="10.0*cm" grid_size_y="10.0*cm"/>
        <segmentation name="Scint_grid" type="CartesianGridXY" key_min="ZDC_HCAL_PbScint2Min_index" key_max="ZDC_HCAL_PbScint2Max_index" grid_size_x="10.0*cm" grid_size_y="10.0*cm"/>
      </segmentation>
      <hits_collections>
        <hits_collection name="ffiZDCScintHits" key="layer" key_min="ZDC_HCAL_PbScint1Min_index" key_max="ZDC_HCAL_PbScint1Max_index"/>
        <hits_collection name="ffiZDCSiPbHits"  key="layer" key_min="ZDC_HCAL_SiPbMin_index" key_max="ZDC_HCAL_SiPbMax_index"/>
        <hits_collection name="ffiZDCScintHits" key="layer" key_min="ZDC_HCAL_PbScint2Min_index" key_max="ZDC_HCAL_PbScint2Max_index"/>
      </hits_collections>
      <id>system:8,layer:12,slice:12,x:32:-16,y:-16</id>  
    </readout>
  </readouts>
</lccdd>
